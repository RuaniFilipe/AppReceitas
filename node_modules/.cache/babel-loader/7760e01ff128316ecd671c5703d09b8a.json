{"ast":null,"code":"var _jsxFileName = \"/home/ruani/projetos/sd-08-project-recipes-app/src/components/IngredientesEmProcesso.js\";\nimport React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport MyContext from '../context/MyContext';\nimport verifyInProgress from '../services/verifyInProgress';\nimport '../styles/IngredientesEmProcesso.css';\n\nfunction IngredientesEmProcesso({\n  id,\n  type\n}) {\n  const FINAL_NULL = 4;\n  const {\n    recipe,\n    setCountCheck\n  } = useContext(MyContext);\n  const newObj = [];\n  let cont = 1;\n  const keys = Object.keys(recipe);\n  keys.map(key => {\n    if (key.includes('strIngredient')) {\n      newObj.push(`${recipe[`strIngredient${cont}`]} - ${recipe[`strMeasure${cont}`]}`);\n      cont += 1;\n    }\n\n    return null;\n  });\n  useEffect(() => {\n    const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n\n    if (!storage) {\n      verifyInProgress(id, type);\n    }\n  }, [id, type]); // []\n\n  const objPronto = newObj.reduce((acumulador, valorAtual) => {\n    const firstNull = valorAtual.substr(0, FINAL_NULL);\n\n    if (valorAtual[0] !== ' ' && firstNull !== 'null') {\n      return acumulador.concat(valorAtual);\n    }\n\n    return acumulador;\n  }, []);\n\n  function handleClick({\n    target\n  }) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const previouslyIngredientsUsed = inProgress[type][id];\n    const ingredientClickedNow = target.id;\n\n    if (target.checked) {\n      target.parentNode.classList.add('riscado');\n\n      if (previouslyIngredientsUsed === []) {\n        previouslyIngredientsUsed.push(ingredientClickedNow);\n      } else if (!previouslyIngredientsUsed.some(ingredient => ingredient === ingredientClickedNow)) {\n        previouslyIngredientsUsed.push(ingredientClickedNow);\n        console.log();\n      }\n\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    } else {\n      target.parentNode.classList.remove('riscado');\n      previouslyIngredientsUsed.splice(previouslyIngredientsUsed.indexOf(ingredientClickedNow), 1);\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    }\n  }\n\n  function inputChecked(index) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const ingredientsUsed = inProgress[type][id];\n    const input = document.getElementsByTagName('input')[index];\n\n    if (input) {\n      console.log(input.id);\n\n      if (ingredientsUsed.includes(input.id)) {\n        console.log('contém');\n        input.setAttribute('checked', true);\n      } else {\n        console.log('não contém');\n        input.removeAttribute('checked');\n      }\n    }\n\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }, \"Ingredientes\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, objPronto.map((ingrediente, index) => /*#__PURE__*/React.createElement(\"li\", {\n    key: index,\n    \"data-testid\": `${index}-ingredient-step`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: ingrediente,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    id: index,\n    type: \"checkbox\",\n    name: ingrediente,\n    value: ingrediente,\n    onClick: handleClick,\n    checked: inputChecked(index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }), ingrediente)))));\n}\n\nIngredientesEmProcesso.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n};\nexport default IngredientesEmProcesso;","map":{"version":3,"sources":["/home/ruani/projetos/sd-08-project-recipes-app/src/components/IngredientesEmProcesso.js"],"names":["React","useContext","useEffect","PropTypes","MyContext","verifyInProgress","IngredientesEmProcesso","id","type","FINAL_NULL","recipe","setCountCheck","newObj","cont","keys","Object","map","key","includes","push","storage","JSON","parse","localStorage","getItem","objPronto","reduce","acumulador","valorAtual","firstNull","substr","concat","handleClick","target","inProgress","previouslyIngredientsUsed","ingredientClickedNow","checked","parentNode","classList","add","some","ingredient","console","log","setItem","stringify","remove","splice","indexOf","inputChecked","index","ingredientsUsed","input","document","getElementsByTagName","setAttribute","removeAttribute","ingrediente","propTypes","string","isRequired"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport MyContext from '../context/MyContext';\nimport verifyInProgress from '../services/verifyInProgress';\nimport '../styles/IngredientesEmProcesso.css';\n\nfunction IngredientesEmProcesso({ id, type }) {\n  const FINAL_NULL = 4;\n  const {\n    recipe,\n    setCountCheck,\n  } = useContext(MyContext);\n  const newObj = [];\n  let cont = 1;\n  const keys = Object.keys(recipe);\n\n  keys.map((key) => {\n    if (key.includes('strIngredient')) {\n      newObj.push(\n        `${recipe[`strIngredient${cont}`]} - ${recipe[`strMeasure${cont}`]}`,\n      );\n      cont += 1;\n    }\n    return null;\n  });\n\n  useEffect(() => {\n    const storage = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    if (!storage) {\n      verifyInProgress(id, type);\n    }\n  }, [id, type]); // []\n\n  const objPronto = newObj.reduce((acumulador, valorAtual) => {\n    const firstNull = valorAtual.substr(0, FINAL_NULL);\n    if (valorAtual[0] !== ' ' && firstNull !== 'null') {\n      return acumulador.concat(valorAtual);\n    }\n    return acumulador;\n  }, []);\n\n  function handleClick({ target }) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const previouslyIngredientsUsed = inProgress[type][id];\n    const ingredientClickedNow = target.id;\n    if (target.checked) {\n      target.parentNode.classList.add('riscado');\n      if (previouslyIngredientsUsed === []) {\n        previouslyIngredientsUsed.push(ingredientClickedNow);\n      } else if (!previouslyIngredientsUsed\n        .some((ingredient) => ingredient === ingredientClickedNow)) {\n        previouslyIngredientsUsed.push(ingredientClickedNow);\n        console.log();\n      }\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    } else {\n      target.parentNode.classList.remove('riscado');\n      previouslyIngredientsUsed\n        .splice(previouslyIngredientsUsed.indexOf(ingredientClickedNow), 1);\n      localStorage.setItem('inProgressRecipes', JSON.stringify(inProgress));\n    }\n  }\n\n  function inputChecked(index) {\n    const inProgress = JSON.parse(localStorage.getItem('inProgressRecipes'));\n    const ingredientsUsed = inProgress[type][id];\n    const input = document.getElementsByTagName('input')[index];\n    if (input) {\n      console.log(input.id);\n      if (ingredientsUsed.includes(input.id)) {\n        console.log('contém');\n        input.setAttribute('checked', true);\n      } else {\n        console.log('não contém');\n        input.removeAttribute('checked');\n      }\n    }\n    return null;\n  }\n\n  return (\n    <div>\n      <h2>Ingredientes</h2>\n      <ul>\n        {objPronto.map((ingrediente, index) => (\n          <li key={ index } data-testid={ `${index}-ingredient-step` }>\n            <label htmlFor={ ingrediente }>\n              <input\n                id={ index }\n                type=\"checkbox\"\n                name={ ingrediente }\n                value={ ingrediente }\n                onClick={ handleClick }\n                checked={ inputChecked(index) }\n              />\n              {ingrediente}\n            </label>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nIngredientesEmProcesso.propTypes = {\n  id: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n\nexport default IngredientesEmProcesso;\n"]},"metadata":{},"sourceType":"module"}